@model OnlineTravelBookingTeamB.Models.Shared.AdminPageHeaderViewModel
@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
}

<div class="row g-3 justify-content-between align-items-center mb-5 px-2">
    <div class="col-12 col-lg-auto">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-1 text-uppercase x-small fw-bold opacity-50">
                <li class="breadcrumb-item"><a asp-controller="Dashboard" asp-action="Index" class="text-decoration-none text-muted">Admin</a></li>
                @if (Model.Breadcrumbs != null)
                {
                    foreach (var bc in Model.Breadcrumbs)
                    {
                        if (bc.IsActive)
                        {
                            <li class="breadcrumb-item active">@bc.Text</li>
                        }
                        else
                        {
                            <li class="breadcrumb-item"><a asp-controller="@bc.Controller" asp-action="@bc.Action" class="text-decoration-none text-muted">@bc.Text</a></li>
                        }
                    }
                }
            </ol>
        </nav>
        <div class="d-flex align-items-center gap-3">
            <div class="authority-icon-box @(Model.IconBgClass ?? "bg-primary") text-white rounded-3 shadow-sm">
                <i class="@Model.IconClass"></i>
            </div>
            <div>
                <h1 class="h2 fw-black text-dark mb-0 tracking-tight">@Model.Title <span class="text-primary">@Model.TitleSuffix</span></h1>
                <div class="d-flex align-items-center gap-2 mt-1">
                    <span class="status-pill @(Model.StatusClass ?? "status-operational")">
                        <i class="@(Model.StatusIconClass ?? "fas fa-circle-notch fa-spin") me-1"></i> @Model.StatusText
                    </span>
                    @if (!string.IsNullOrEmpty(Model.BadgeText))
                    {
                        <span class="asset-id-tag">@Model.BadgeText</span>
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 col-lg-auto">
        <div class="d-flex gap-2 flex-wrap">
            @if (Model.ShowSearch || Model.ShowStatusFilter)
            {
                <form method="get" class="d-flex gap-2">
                    @if (Model.ShowStatusFilter)
                    {
                        <select name="@Model.StatusFilterName" class="form-select border-0 bg-light fw-medium shadow-sm" style="min-width: 150px;" onchange="this.form.submit()">
                            <option value="">@Model.StatusFilterPlaceholder</option>
                            @if (Model.StatusOptions != null)
                            {
                                foreach (var opt in Model.StatusOptions)
                                {
                                    <option value="@opt.Value" selected="@(opt.Selected ? "selected" : null)">@opt.Text</option>
                                }
                            }
                        </select>
                    }
                    @if (Model.ShowSearch)
                    {
                        <div class="input-group premium-search-group shadow-sm" style="min-width: 250px;">
                            <input type="text" name="@Model.SearchInputName" class="form-control border-0 bg-light fw-medium" placeholder="@Model.SearchPlaceholder" value="@Model.SearchValue" />
                            <button type="submit" class="btn btn-primary border-0 btn-sm"><i class="fas fa-search"></i></button>
                        </div>
                    }
                </form>
            }
            @if (Model.ActionButtons != null)
            {
                foreach (var btn in Model.ActionButtons)
                {
                    <a asp-controller="@(btn.Controller ?? currentController)" asp-action="@btn.Action" asp-all-route-data="@btn.RouteData" class="btn @(btn.Class ?? "btn-premium-dark") shadow-sm">
                        <i class="@btn.IconClass me-2"></i> @btn.Text
                    </a>
                }
            }
        </div>
    </div>
</div>
